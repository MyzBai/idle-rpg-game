{
    "$id": "http://example.com/schemas/module-schema.json",
	"$schema": "http://json-schema.org/draft-07/schema",
	"type": "object",
	"additionalProperties": false,
	"required": ["enemies", "skills"],
	"properties": {
		"$schema": { "type": "string" },
		"config": {
			"type": "object",
			"properties": {
				"include": { "type": "array", "items": { "type": "string" } },
				"exclude": { "type": "array", "items": { "type": "string" } },
				"id": { "type": ["number", "string"] }
			}
		},
		"player": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"defaultStatValues": {
					"type": "object",
					"additionalProperties": false,
					"properties": {
						"minPhysicalDamage": { "type": "number" },
						"maxPhysicalDamage": { "type": "number" },
						"critMulti": { "type": "number" },
						"bleedDuration": { "type": "number" },
						"bleedCount": { "type": "number" },
						"mana": { "type": "number" },
						"manaRegen": { "type": "number" },
						"strength": { "type": "number" },
						"dexterity": { "type": "number" },
						"intelligence": { "type": "number" }
					}
				}
			}
		},
		"enemies": {
			"type": "object",
			"required": ["enemyList"],
			"properties": {
				"enemyList": {
					"type": "array",
					"minItems": 1,
					"items": {
						"type": "object",
						"required": ["health"],
						"properties": {
							"health": {
								"type": "number"
							}
						}
					}
				}
			}
		},
		"skills": {
			"type": "object",
			"required": ["attackSkills"],
			"properties": {
				"maxSupports": {
					"type": "integer"
				},
				"attackSkills": {
					"type": "array",
					"minItems": 1,
					"items": {
						"type": "object",
						"required": ["name", "levelReq", "stats"],
						"properties": {
							"name": {
								"$ref": "#/definitions/name"
							},
							"levelReq": {
								"$ref": "#/definitions/levelReq"
							},
							"stats": {
								"type": "object",
								"required": ["attackSpeed", "manaCost", "baseDamageMultiplier"],
								"properties": {
									"attackSpeed": { "type": "number", "minimum": 0.1 },
									"baseDamageMultiplier": { "type": "number" },
									"manaCost": { "type": "number" }
								}
							},
							"mods": {
								"$ref": "#/definitions/modList"
							}
						}
					}
				},
				"supportSkills": {
					"type": "array",
					"items": {
						"type": "object",
						"required": ["name", "levelReq", "stats"],
						"properties": {
							"name": {
								"$ref": "#/definitions/name"
							},
							"levelReq": {
								"$ref": "#/definitions/levelReq"
							},
							"stats": {
								"type": "object",
								"required": ["manaMultiplier"],
								"additionalProperties": false,
								"properties": {
									"manaMultiplier": {
										"type": "number",
										"minimum": 0
									}
								}
							},
							"mods": {
								"$ref": "#/definitions/modList"
							}
						}
					}
				}
			}
		},
		"items": {
			"type": "object",
			"properties": {
				"maxMods": { "type": "integer" },
				"items": {
					"type": "array",
					"items": {
						"type": "object",
						"required": ["name", "levelReq"],
						"properties": {
							"name": {
								"$ref": "#/definitions/name"
							},
							"levelReq": {
								"$ref": "#/definitions/levelReq"
							}
						}
					}
				},
				"crafting": {
					"type": "object",
					"required": [],
					"additionalProperties": false,
					"anyOf": [
						{
							"required": ["basic"]
						},
						{
							"required": ["advanced"]
						}
					],
					"properties": {
						"basic": {
							"type": "object",
							"properties": {
								"actions": {
									"type": "object",
									"minProperties": 1,
									"properties": {
										"rollMods": {
											"type": "object",
											"properties": {
												"cost": { "type": "number" }
											}
										},
										"addMod": {
											"type": "object",
											"properties": {
												"cost": { "type": "number" }
											}
										},
										"rollValues": {
											"type": "object",
											"properties": {
												"cost": { "type": "number" }
											}
										},
										"remove": {
											"type": "object",
											"properties": {
												"cost": { "type": "number" }
											}
										}
									}
								}
							}
						},
						"advanced": {
							"type": "string"
						}
					}
				},
				"modTables": {
					"type": "array",
					"items": {
						"type": "array",
                        "items": {
                            "required": ["levelReq", "weight", "mod"],
                            "properties": {
                                "levelReq": { "$ref": "#/definitions/levelReq" },
                                "weight": { "type": "number" },
                                "mod": { "$ref": "#/definitions/mod" }
                            }
                        }
       
					}
				}
			}
		},
		"modTree": {
			"type": "object",
            "required": ["numPointsPerLevel", "unassignCost"],
			"properties": {
				"numPointsPerLevel": { "type": "number" },
				"unassignCost": { "type": "number" },
				"nodes": {
					"type": "array",
					"items": {
						"type": "object",
                        "required": ["name", "maxPoints", "levelReq", "mods"],
						"properties": {
							"name": { "$ref": "#/definitions/name" },
							"maxPoints": { "type": "integer" },
							"levelReq": { "$ref": "#/definitions/levelReq" },
							"mods": { "$ref": "#/definitions/modList" }
						}
					}
				}
			}
		}
	},
	"definitions": {
		"name": {
			"type": "string",
			"minLength": 3,
			"pattern": "^[A-Za-z0-9 &]+$"
		},
		"levelReq": {
			"type": "integer",
			"minimum": 0
		},
		"modList": {
			"type": "array",
			"items": { "$ref": "#/definitions/mod" }
		},
		"mod": {
            "type": "string"
		}
	}
}
